<mat-expansion-panel [expanded]='true'>
  <mat-expansion-panel-header style="background-color: #416F97;">
    <mat-panel-title style="color: white;">
      Staff Information
    </mat-panel-title>
    <mat-panel-description>
    </mat-panel-description>
  </mat-expansion-panel-header>
  <br>
  <div>
    <div style="width:98%" align="center">
      <ngb-alert *ngIf="successMessage" type="success" (close)="successMessage = null">{{ successMessage }}</ngb-alert>
      <ngb-alert *ngIf="errorMessage" type="danger" (close)="errorMessage = null">{{ errorMessage }}</ngb-alert>
      <br>
      <table mat-table [dataSource]="dataSource" class="record" id="table" style="width: 100%;">

        <!-- ID Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef style="text-align: center"> Name </th>
          <td mat-cell *matCellDef="let rows">{{rows.name}} </td>
        </ng-container>

        <!-- Progress Column -->
        <ng-container matColumnDef="branchName">
          <th mat-header-cell *matHeaderCellDef style="text-align: center"> Branch </th>
          <td mat-cell *matCellDef="let rows">{{branchMap.get(rows.branchId)}} </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="clinic">
          <th mat-header-cell *matHeaderCellDef style="text-align: center"> Clinic </th>
          <td mat-cell *matCellDef="let rows">{{clinicMap.get(rows.clinicId)}} </td>
        </ng-container>

        <!-- Color Column -->
        <ng-container matColumnDef="mobileNo">
          <th mat-header-cell *matHeaderCellDef style="text-align: center"> Mobile No </th>
          <td mat-cell *matCellDef="let rows">{{rows.contactNo}} </td>
        </ng-container>

        <!-- Color Column -->
        <ng-container matColumnDef="occupation">
          <th mat-header-cell *matHeaderCellDef style="text-align: center"> Occupation </th>
          <td mat-cell *matCellDef="let rows"> {{occupationMap.get(rows.job)}} </td>
        </ng-container>

        <!-- Color Column -->
        <ng-container matColumnDef="btnEdit">
          <th mat-header-cell *matHeaderCellDef style="text-align: center"> Action </th>
          <td mat-cell *matCellDef="let rows">
            <button type="button" class="buttonLinks" *ngIf="rows.status!=='I'" (click)="editStaff(rows)">Edit </button>&nbsp;
            <button type="button" class="buttonLinks" *ngIf="rows.status==='A'" (click)="removeConfirmation(rows.id, rows.name)"> Remove</button>
            <button type="button" class="buttonLinks" *ngIf="rows.status==='P'" (click)="acceptConfirmation(rows.id, rows.name)"> Accept</button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let rows; columns: displayedColumns;"></tr>
      </table>

      <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
    </div>
  </div>
</mat-expansion-panel>

<!-- POPUP MODAL CONFIRMATION FOR DELETION OF RECORD. -->
<ng-template #deleteConfirmation>
  <div class="modal-body text-center">
    <p>Confirm remove staff {{staffName}}?</p>
    <button type="button" class="btn-ipStyle2" (click)="confirmDelete()" >Yes</button>&nbsp;
    <button type="button" class="btn-ipStyle2" (click)="decline()" >No</button>
  </div>
</ng-template>

<!-- POPUP MODAL CONFIRMATION FOR ACCEPT OF RECORD. -->
<ng-template #acceptConfirmation>
  <div class="modal-body text-center">
    <p>Confirm accept staff {{staffName}}?</p>
    <button type="button" class="btn-ipStyle2" (click)="confirmAccept()" >Yes</button>&nbsp;
    <button type="button" class="btn-ipStyle2" (click)="declineAccept()" >No</button>
  </div>
</ng-template>

<!-- POPUP MODAL EDIT STAFF RECORD. -->
<ng-template #editStaffRecord>
  <div class="modal-body text-center">
    <div class="row" style="padding-top: 10px">

      <div class="form-group col-md-2">
        <label class="form-control-label">Full Name <span class="red-asterisk">*</span></label>
      </div>
      <div class="form-group col-md-1">:</div>
      <div class="form-group col-md-3">
        <input type="text" class="form-control-label" name="fName" id="field_fName" [(ngModel)]="fName"/>
      </div>
      <div class="form-group col-md-5"></div>

      <div class="form-group col-md-2">
        <label class="form-control-label">Contact No <span class="red-asterisk">*</span></label>
      </div>
      <div class="form-group col-md-1">:</div>
      <div class="form-group col-md-3">
        <input type="text" class="form-control-label" name="cNo" id="field_cNo" [(ngModel)]="cNo"/>
      </div>
      <div class="form-group col-md-5"></div>

      <div class="form-group col-md-2">
        <label class="form-control-label">Address <span class="red-asterisk">*</span></label>
      </div>
      <div class="form-group col-md-1">:</div>
      <div class="form-group col-md-3">
        <input type="text" class="form-control-label" name="address" id="field_address" [(ngModel)]="address"/>
      </div>
      <div class="form-group col-md-5"></div>

      <div class="form-group col-md-2">
        <label class="form-control-label">Email <span class="red-asterisk">*</span></label>
      </div>
      <div class="form-group col-md-1">:</div>
      <div class="form-group col-md-3">
        <input type="text" class="form-control-label" name="email" id="field_email" [(ngModel)]="email"/>
      </div>
      <div class="form-group col-md-5"></div>

      <div class="form-group col-md-2">
        <label class="form-control-label">Occupation <span class="red-asterisk">*</span></label>
      </div>
      <div class="form-group col-md-1">:</div>
      <div class="form-group col-md-3">
        <select class="form-control optionPlaceholder" id="field_occupation" name="occupation" [(ngModel)]="occupation">
          <option [ngValue]="undefined" hidden>Please Select</option>
          <!--                    <option [ngValue]="null"></option>-->
          <option [ngValue]="rows.id" *ngFor="let rows of occupationList">{{rows.value}}</option>
        </select>
        <div *ngIf="occupationError">
          <span class="red-error">Required field!</span>
        </div>
      </div>
      <div class="form-group col-md-5"></div>

      <div class="form-group col-md-2">
        <label class="form-control-label">Clinic <span class="red-asterisk">*</span></label>
      </div>
      <div class="form-group col-md-1">:</div>
      <div class="form-group col-md-3">
        <select class="form-control optionPlaceholder" id="field_clinic" name="clinic" [(ngModel)]="clinic" (change)="listOfBranchesWithClinicId(clinic)">
          <option [ngValue]="undefined" hidden>Please Select</option>
          <!--                    <option [ngValue]="null"></option>-->
          <option [ngValue]="rows.id" *ngFor="let rows of clinicList">{{rows.value}}</option>
        </select>
        <div *ngIf="clinicError">
          <span class="red-error">Required field!</span>
        </div>
      </div>
      <div class="form-group col-md-5"></div>

      <ng-template [ngIf]="hide">
        <div class="form-group col-md-2">
          <label class="form-control-label">Branch <span class="red-asterisk">*</span></label>
        </div>
        <div class="form-group col-md-1">:</div>
        <div class="form-group col-md-3">
          <select class="form-control optionPlaceholder" id="field_branch" name="branch" [(ngModel)]="branch">
            <option [ngValue]="undefined" hidden>Please Select</option>
            <!--                    <option [ngValue]="null"></option>-->
            <option [ngValue]="rows.id" *ngFor="let rows of branchListEdit">{{rows.value}}</option>
          </select>
          <div *ngIf="branchError">
            <span class="red-error">Required field!</span>
          </div>
        </div>
        <div class="form-group col-md-5"></div>
      </ng-template>

    </div>
    <button type="button" class="btn-ipStyle2" (click)="cancel()" >Cancel</button>&nbsp;
<!--    <button type="button" class="btn-ipStyle2" (click)="clear()" >Clear</button>&nbsp;-->
    <button type="button" class="btn-ipStyle2" (click)="update()" >Update</button>
  </div>
</ng-template>
